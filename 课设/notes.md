### 用遗传算法来解决旅行商问题

#### 旅行商问题

    也叫旅行推销员问题(Traveling salesman problem:TSP):给定一系列城市和每对城市之间的距离,求访问每座城市一次并回到起点城市的最短回路.它是组合优化中的一个`NP难问题` .

##### 解法思路

    途程构建法:从距离矩阵中产生一个近似最佳解的途径

    途程改善法:先给定一个可行的途程,然后进行改善,一直到不能改善为止

##### 经典解决算法

    枚举法(采用深度优先策略),回溯法,分支限界法(FIFO队列思想),贪心算法

##### 现代算法(启发式算法)

    遗传算法、模拟退火法、蚁群算法、禁忌搜索算法、贪婪算法和神经网络等

#### NP难问题

    NP:Non-deterministic Polynomial,多项式复杂程度的非确定性问题

    在算法中的一个衡量程序优劣的重要指标:复杂度,通常复杂度是一个多项式的最高量级

$P(n)=an^m+bn^{m-1}+cn^{m-2}...+dn+e+fn^{-1}+gn^{-2}+...$ 

$O(P(n))=n^m$

    若存在这样确定的多项式,那么就是一个P类问题(确定多项式)

    不存在的话,就是一个NP类问题.

    如最经典的TSP问题,如果用枚举法,对于n个城市求最短回路就需要(n-1)!次,就不是多项式了.

#### 遗传算法

    遗传算法(Genetic Algorithm,GA)是一种根据大自然中生物演化规律设计的.该算法通过数学的方式,利用计算机仿真运算,将问题的求解过程转换成类似生物进化中染色体基因交叉,变异等过程.

    在求解复杂的组合优化问题时,相对于一些常规的优化算法,通常能较快地获得较好得优化结果

##### 基本特征

###### 编码(基因,个体):gen

    由于遗传算法不能直接处理问题空间的参数,所以需要通过编码将要求解的问题表示成遗传空间的染色体

###### 适应度函数fitness

    适应度,表示某一个体对环境的适应能力,也表示该个体的繁殖能力,遗传算法的适应度函数也叫评价函数,是用来判断群体中的个体优劣程度的指标

    遗传算法在搜索进化过程中一般不需要其他外部信息，仅用评估函数来评估个体或解的优劣，并作为以后遗传操作的依据。由于遗传算法中，适应度函数要比较排序并在此基础上计算选择概率，所以适应度函数的值要取正值。由此可见，在不少场合，将目标函数映射成求最大值形式且函数值非负的适应度函数是必要的

###### 初始群体选取pop

    遗传算法中初始群体的个体选取是随机的,一般来讲，初始群体的设定可采取如下的策略: 
    a)根据问题固有知识，设法把握最优解所占空间在整个问题空间中的分布范围，然后，在此分布范围内设定初始群体
    b)先随机生成一定数目的个体，然后从中挑出最好的个体加到初始群体中。这种过程不断迭代，直到初始群体中个体数达到了预先确定的规模

##### 运算过程

(1)初始化：设置进化代数计数器t=0，设置最大进化代数T，随机生成M个个体作为初始群体P(0)
    (2)个体评价：计算群体P(t)中各个个体的适应度
    (3)选择运算：将选择算子作用于群体。选择的目的是把优化的个体直接遗传到下一代或通过配对交叉产生新的个体再遗传到下一代。选择操作是建立在群体中个体的适应度评估基础上的
    (4)交叉运算：将交叉算子作用于群体。遗传算法中起核心作用的就是交叉算子
    (5)变异运算：将变异算子作用于群体。即是对群体中的个体串的某些基因座上的基因值作变动。群体P(t)经过选择、交叉、变异运算之后得到下一代群体P(t+1)
    (6)终止条件判断：若t=T,则以进化过程中所得到的具有最大适应度个体作为最优解输出，终止计算。

##### 极值优化法

基本的EO算法步骤非常简单。并且不需要凋整参数,具有实现容易、计算效率高等优点.其具体实现步骤如下:

Stepl:针对具体问题中的变量,定义合适的物种(变量划分)xi及对应的适值函数λi;

Step2:初始化,随机产生一个问题的初始配置 (初始变量);

Step3:计算每个物种的适值λi,并根据适值大小对物种xi排序;

Step4:选择适值最小的物种xm,并且更新(按一定概率分布产生随机数来替换原有的xm);

Step5:如果满足停止准则,则算法停止,输出结果.否则返回Step3.

下面以TSP问题为例,说明EO算法的实现过程.TSP算法是典型的NP难题,并且应用广泛, 具有代表性.

在TSP问题中,一个城市被定义为一个物种. EO算法的原则是系统内部的各个物种追求局部最好值,并通过局部的相互作用获得整体最优.在一个巡回中,城市i追求的局部最优是与相连接的城市之间有最短的路径,因而定义城市i的适值为λi=3/(pi+qi).将其余各个城市与城市i的路径从小到大排序,例如与i相连的两个城市分别排在第pi位和第qi位,记为和。





交叉

![](C:\Users\Tenerome\Pictures\notepic\2022-10-18-13-47-29-image.png)

index1=9,index2=29

截取的parent2的基因片段就是1,2,23.....17,11

然后迭代parent1,如果in temp,就不插入,如果not in temp就插入

p1len=index1时,就是迭代到22时,插入temp,后续接着插入



变异:翻转

![](C:\Users\Tenerome\Pictures\notepic\2022-10-18-14-21-08-image.png)
